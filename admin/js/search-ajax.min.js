!function(n){n(function(){n(".cmb2-search-ajax").each(function(){const a=n(this).attr("id");var t=n(this).attr("data-queryargs"),e=n(this).attr("data-object");n(this).devbridgeAutocomplete({serviceUrl:wi.ajaxurl,type:"POST",triggerSelectOnValidInput:!0,showNoSuggestionNotice:!0,noSuggestionNotice:wi.notice,transformResult:function(t){const i=n.parseJSON(t);if(n("#"+a+"_results li").length){const s=Array();let e=0;n("#"+a+"_results input").each(function(){s.push(n(this).val())}),n(i).each(function(t,a){-1<n.inArray(a.data.toString(),s)&&(i.splice(t-e,1),e++)})}return n(i).each(function(t,a){a.value=n("<textarea />").html(a.value).text()}),{suggestions:i}},params:{action:"cmb2_search_ajax_get_results",wicheck:wi.nonce,object:e,query_args:t},onSearchStart:function(){n(this).next("img.cmb2-search-ajax-spinner").css("display","inline-block")},onSearchComplete:function(){n(this).next("img.cmb2-search-ajax-spinner").hide()},onSelect:function(t){n(this).devbridgeAutocomplete("clearCache");var a=n(this).attr("id")+"_results",e=n(this).attr("data-limit"),i=n(this).attr("data-sortable");1!==e?(i="1"===i?'<span class="handle"></span>':"",n("#"+a).append("<li>"+i+'<input type="hidden" name="'+a+'[]" value="'+t.data+'"><a href="'+t.guid+'" target="_blank" class="edit-link"><div class="wi_wrapper">'+t.safety+'<div class="wi_value">'+t.value+'</div></div></a><a class="remover"><span class="dashicons dashicons-no"></span><span class="dashicons dashicons-dismiss"></span></a></li>'),n(this).val(""),e===n("#"+a+" li").length?n(this).prop("disabled","disabled"):n(this).focus()):n("input[name="+a+"]").val(t.data)}}),"1"===n(this).attr("data-sortable")&&n("#"+a+"_results").sortable({handle:".handle",placeholder:"ui-state-highlight",forcePlaceholderSize:!0}),"1"===n(this).attr("data-limit")&&n(this).on("blur",function(){var t;""===n(this).val()&&(t=n(this).attr("id")+"_results",n("input[name="+t+"]").val(""))})}),n(".cmb2-search-ajax-results").on("click","a.remover",function(){n(this).parent("li").fadeOut(400,function(){var t=n(this).parents("ul").attr("id"),t=(n(this).remove(),"#"+t);n(t).removeProp("disabled"),n(t).devbridgeAutocomplete("clearCache")})})})}(jQuery);